import React, { useState } from 'react';
import { OutputPanel } from '../components/ide/OutputPanel';
import { Button } from '../components/ui/button';

const ErrorTestPage = () => {
    const [currentError, setCurrentError] = useState(null);
    const [executing, setExecuting] = useState(false);
    const errorExamples = {
        CE: {error: \"Main.java:3: error: ')' expected\\n        System.out.println(\\\"Hello World\\\"  // Missing semicolon\\n                                        ^\\n1 error\",\n      results: [{\n        status: \"CE\",\n        error: \"Main.java:3: error: ')' expected\\n        System.out.println(\\\"Hello World\\\"  // Missing semicolon\\n                                        ^\\n1 error\",\n        output: \"\",\n        hidden: false\n      }],\n      passed: 0,\n      total: 1\n    },\n    RE: {\n      error: \"Exception in thread \\\"main\\\" java.lang.ArrayIndexOutOfBoundsException: Index 10 out of bounds for length 5\\n\\tat Main.main(Main.java:4)\",\n      results: [{\n        status: \"RE\",\n        error: \"Exception in thread \\\"main\\\" java.lang.ArrayIndexOutOfBoundsException: Index 10 out of bounds for length 5\\n\\tat Main.main(Main.java:4)\",\n        output: \"\",\n        hidden: false\n      }],\n      passed: 0,\n      total: 1\n    },\n    TLE: {\n      error: \"Time limit exceeded\",\n      results: [{\n        status: \"TLE\",\n        error: \"Time limit exceeded\",\n        output: \"\",\n        hidden: false\n      }],\n      passed: 0,\n      total: 1\n    },\n    MLE: {\n      error: \"Memory limit exceeded\",\n      results: [{\n        status: \"MLE\",\n        error: \"Memory limit exceeded\",\n        output: \"\",\n        hidden: false\n      }],\n      passed: 0,\n      total: 1\n    },\n    SUCCESS: {\n      results: [{\n        status: \"PASS\",\n        input: \"5\",\n        expectedOutput: \"25\",\n        output: \"25\",\n        hidden: false\n      }],\n      passed: 1,\n      total: 1\n    }\n  };\n\n  const simulateExecution = (errorType) => {\n    setExecuting(true);\n    setTimeout(() => {\n      setCurrentError(errorExamples[errorType]);\n      setExecuting(false);\n    }, 1000);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 p-8\">\n      <div className=\"max-w-6xl mx-auto\">\n        <h1 className=\"text-3xl font-bold text-gray-900 mb-8\">Error Display Test Page</h1>\n        \n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n          {/* Controls */}\n          <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6\">\n            <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">Test Different Error Types</h2>\n            <div className=\"space-y-3\">\n              <Button \n                onClick={() => simulateExecution('CE')}\n                className=\"w-full bg-orange-600 hover:bg-orange-700 text-white\"\n                disabled={executing}\n              >\n                Test Compilation Error (CE)\n              </Button>\n              <Button \n                onClick={() => simulateExecution('RE')}\n                className=\"w-full bg-red-600 hover:bg-red-700 text-white\"\n                disabled={executing}\n              >\n                Test Runtime Error (RE)\n              </Button>\n              <Button \n                onClick={() => simulateExecution('TLE')}\n                className=\"w-full bg-yellow-600 hover:bg-yellow-700 text-white\"\n                disabled={executing}\n              >\n                Test Time Limit Exceeded (TLE)\n              </Button>\n              <Button \n                onClick={() => simulateExecution('MLE')}\n                className=\"w-full bg-purple-600 hover:bg-purple-700 text-white\"\n                disabled={executing}\n              >\n                Test Memory Limit Exceeded (MLE)\n              </Button>\n              <Button \n                onClick={() => simulateExecution('SUCCESS')}\n                className=\"w-full bg-green-600 hover:bg-green-700 text-white\"\n                disabled={executing}\n              >\n                Test Success Case\n              </Button>\n              <Button \n                onClick={() => setCurrentError(null)}\n                variant=\"outline\"\n                className=\"w-full\"\n                disabled={executing}\n              >\n                Clear Output\n              </Button>\n            </div>\n          </div>\n\n          {/* Output Panel */}\n          <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden\">\n            <div className=\"h-12 bg-gray-50 border-b border-gray-200 flex items-center px-4\">\n              <h3 className=\"text-sm font-semibold text-gray-900\">Output Panel Preview</h3>\n            </div>\n            <div className=\"h-96\">\n              <OutputPanel \n                results={currentError} \n                executing={executing} \n                isSubmitMode={false}\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* Error Details */}\n        {currentError && (\n          <div className=\"mt-8 bg-white rounded-xl shadow-sm border border-gray-200 p-6\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Current Error Data Structure</h3>\n            <pre className=\"bg-gray-50 rounded-lg p-4 text-sm text-gray-800 overflow-auto\">\n              {JSON.stringify(currentError, null, 2)}\n            </pre>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ErrorTestPage;